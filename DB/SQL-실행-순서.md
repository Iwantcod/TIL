# SQL 쿼리문 절 실행 순서

[순서](#순서) <br>
[필터링 절의 차이](#필터링-절의-차이)


## 순서
### FROM → ON → JOIN → WHERE → GROUP BY → HAVING → SELECT → DISTINCT → ORDER BY
<br>

### 1. FROM
조회할 대상(테이블)을 지정한다. 테이블이 아니라 인라인 뷰도 조회 대상이 될 수 있다.
### 2. ON
조인 시 조인 조건이 명시된 ON 절이 수행된다. 조인 조건을 확인하는 단계이다.
### 3. JOIN
조인이 수행된다. 여러 테이블 혹은 인라인 뷰를 가상의 테이블로 결합하는 과정이 이루어진다.
### 4. WHERE
최종 결정된 조회 대상으로부터 '행 단위' 필터링을 수행한다.
### 5. GROUP BY
WHERE 절로 필터링된 결과를 특정 데이터를 기준으로 그룹화한다.
### 6. HAVING
GROUP BY 절로 그룹화된 결과에 대해 '그룹 단위' 필터링을 수행한다.
### 7. SELECT
앞의 단계를 거친 뒤 실제로 출력할 컬럼을 선택한다.
### 8. DISTINCT
출력 결과에서 중복을 제거한다.
### 9. ORDER BY
최종 결과를 지정한 기준에 따라 정렬한다.
### 10. LIMIT / OFFSET
결과에서 반환할 행의 수를 제한하거나, 특정 위치부터 조회한다.


## 필터링 절의 차이
|ON|WHERE|HAVING|
|:--:|:--:|:--:|
|조인 조건 검사|행 단위 필터링|그룹 단위 필터링|
|조건에 따라 JOIN 알고리즘 선택|각 행별로 조건식을 평가|각 그룹별로 집계함수 조건식 평가|
| |TRUE인 행만 다음 단계로 전달|조건을 만족하는 그룹만 결과에 포함

WHERE, ON 절 각각으로 동일한 결과를 출력할 수 있다면 ON 절을 활용하는 것이 성능적인 측면에서 유리하다.<br>
WHERE은 '결과 릴레이션'에서 필터링을 하고, ON은 결과 릴레이션이 만들어지기 위한 조인 시점의 조건을 설정한다. 따라서 큰 데이터에서 필터링을 하여 결과를 출력하는 WHERE보다, 조인 시점에서 조건에 맞는 요소만 결과로 출력하는 것이 더 빠르고, 효율적이다.